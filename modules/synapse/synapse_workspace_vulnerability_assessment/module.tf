resource "azurerm_synapse_workspace_vulnerability_assessment" "sywsva" {
  workspace_security_alert_policy_id = var.settings.workspace_security_alert_policy_id
  storage_container_path             = var.settings.storage_container_path
  storage_account_access_key         = try(var.settings.storage_account_access_key, null)
  storage_container_sas_key          = try(var.settings.storage_container_sas_key, null)
  dynamic "recurring_scans" {
    for_each = try(var.settings.recurring_scans, null) != null ? [var.settings.recurring_scans] : []
    content {
      enabled                           = try(recurring_scans.value.enabled, null)
      email_subscription_admins_enabled = try(recurring_scans.value.email_subscription_admins_enabled, null)
      emails                            = try(recurring_scans.value.emails, null)
    }
  }
}