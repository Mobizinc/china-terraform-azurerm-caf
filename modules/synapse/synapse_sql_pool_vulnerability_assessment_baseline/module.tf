
resource "azurecaf_name" "syspvab" {
  name          = var.settings.name
  resource_type = "azurerm_data_factory" #"azurerm_synapse_sql_pool_vulnerability_assessment_baseline"
  prefixes      = var.global_settings.prefixes
  random_length = var.global_settings.random_length
  clean_input   = true
  passthrough   = var.global_settings.passthrough
  use_slug      = var.global_settings.use_slug
}
resource "azurerm_synapse_sql_pool_vulnerability_assessment_baseline" "syspvab" {
  name                                 = azurecaf_name.syspvab.result
  rule_name                            = var.settings.rule_name
  sql_pool_vulnerability_assessment_id = var.settings.sql_pool_vulnerability_assessment_id
  dynamic "baseline" {
    for_each = try(var.settings.baseline, null) != null ? [var.settings.baseline] : []
    content {
      result = try(baseline.value.result, null)
    }
  }
}